{"version":3,"names":["h","copyToClipboard","EditButton","file","uploadInProgressOrComplete","metaFields","canEditFile","i18n","onClick","length","meta","name","RemoveButton","copyLinkToClipboard","event","props","uploadURL","then","uppy","log","info","catch","target","focus","preventScroll","CopyLinkButton","Buttons","showLinkToFileUploadResult","showRemoveButton","toggleFileCard","openFileEditor","editAction","id","removeFile"],"sources":["index.jsx"],"sourcesContent":["import { h } from 'preact'\nimport copyToClipboard from '../../../utils/copyToClipboard.js'\n\nfunction EditButton ({\n  file,\n  uploadInProgressOrComplete,\n  metaFields,\n  canEditFile,\n  i18n,\n  onClick,\n}) {\n  if (\n    (!uploadInProgressOrComplete && metaFields && metaFields.length > 0)\n    || (!uploadInProgressOrComplete && canEditFile(file))\n  ) {\n    return (\n      <button\n        className=\"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--edit\"\n        type=\"button\"\n        aria-label={i18n('editFileWithFilename', { file: file.meta.name })}\n        title={i18n('editFileWithFilename', { file: file.meta.name })}\n        onClick={() => onClick()}\n      >\n        <svg aria-hidden=\"true\" focusable=\"false\" className=\"uppy-c-icon\" width=\"14\" height=\"14\" viewBox=\"0 0 14 14\">\n          <g fillRule=\"evenodd\">\n            <path d=\"M1.5 10.793h2.793A1 1 0 0 0 5 10.5L11.5 4a1 1 0 0 0 0-1.414L9.707.793a1 1 0 0 0-1.414 0l-6.5 6.5A1 1 0 0 0 1.5 8v2.793zm1-1V8L9 1.5l1.793 1.793-6.5 6.5H2.5z\" fillRule=\"nonzero\" />\n            <rect x=\"1\" y=\"12.293\" width=\"11\" height=\"1\" rx=\".5\" />\n            <path fillRule=\"nonzero\" d=\"M6.793 2.5L9.5 5.207l.707-.707L7.5 1.793z\" />\n          </g>\n        </svg>\n      </button>\n    )\n  }\n  return null\n}\n\nfunction RemoveButton ({ i18n, onClick, file }) {\n  return (\n    <button\n      className=\"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--remove\"\n      type=\"button\"\n      aria-label={i18n('removeFile', { file: file.meta.name })}\n      title={i18n('removeFile', { file: file.meta.name })}\n      onClick={() => onClick()}\n    >\n      <svg aria-hidden=\"true\" focusable=\"false\" className=\"uppy-c-icon\" width=\"18\" height=\"18\" viewBox=\"0 0 18 18\">\n        <path d=\"M9 0C4.034 0 0 4.034 0 9s4.034 9 9 9 9-4.034 9-9-4.034-9-9-9z\" />\n        <path fill=\"#FFF\" d=\"M13 12.222l-.778.778L9 9.778 5.778 13 5 12.222 8.222 9 5 5.778 5.778 5 9 8.222 12.222 5l.778.778L9.778 9z\" />\n      </svg>\n    </button>\n  )\n}\n\nconst copyLinkToClipboard = (event, props) => {\n  copyToClipboard(props.file.uploadURL, props.i18n('copyLinkToClipboardFallback'))\n    .then(() => {\n      props.uppy.log('Link copied to clipboard.')\n      props.uppy.info(props.i18n('copyLinkToClipboardSuccess'), 'info', 3000)\n    })\n    .catch(props.uppy.log)\n    // avoid losing focus\n    .then(() => event.target.focus({ preventScroll: true }))\n}\n\nfunction CopyLinkButton (props) {\n  const { i18n } = props\n\n  return (\n    <button\n      className=\"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--copyLink\"\n      type=\"button\"\n      aria-label={i18n('copyLink')}\n      title={i18n('copyLink')}\n      onClick={(event) => copyLinkToClipboard(event, props)}\n    >\n      <svg aria-hidden=\"true\" focusable=\"false\" className=\"uppy-c-icon\" width=\"14\" height=\"14\" viewBox=\"0 0 14 12\">\n        <path d=\"M7.94 7.703a2.613 2.613 0 0 1-.626 2.681l-.852.851a2.597 2.597 0 0 1-1.849.766A2.616 2.616 0 0 1 2.764 7.54l.852-.852a2.596 2.596 0 0 1 2.69-.625L5.267 7.099a1.44 1.44 0 0 0-.833.407l-.852.851a1.458 1.458 0 0 0 1.03 2.486c.39 0 .755-.152 1.03-.426l.852-.852c.231-.231.363-.522.406-.824l1.04-1.038zm4.295-5.937A2.596 2.596 0 0 0 10.387 1c-.698 0-1.355.272-1.849.766l-.852.851a2.614 2.614 0 0 0-.624 2.688l1.036-1.036c.041-.304.173-.6.407-.833l.852-.852c.275-.275.64-.426 1.03-.426a1.458 1.458 0 0 1 1.03 2.486l-.852.851a1.442 1.442 0 0 1-.824.406l-1.04 1.04a2.596 2.596 0 0 0 2.683-.628l.851-.85a2.616 2.616 0 0 0 0-3.697zm-6.88 6.883a.577.577 0 0 0 .82 0l3.474-3.474a.579.579 0 1 0-.819-.82L5.355 7.83a.579.579 0 0 0 0 .819z\" />\n      </svg>\n    </button>\n  )\n}\n\nexport default function Buttons (props) {\n  const {\n    uppy,\n    file,\n    uploadInProgressOrComplete,\n    canEditFile,\n    metaFields,\n    showLinkToFileUploadResult,\n    showRemoveButton,\n    i18n,\n    toggleFileCard,\n    openFileEditor,\n  } = props\n\n  const editAction = () => {\n    if (metaFields && metaFields.length > 0) {\n      toggleFileCard(true, file.id)\n    } else {\n      openFileEditor(file)\n    }\n  }\n\n  return (\n    <div className=\"uppy-Dashboard-Item-actionWrapper\">\n      <EditButton\n        i18n={i18n}\n        file={file}\n        uploadInProgressOrComplete={uploadInProgressOrComplete}\n        canEditFile={canEditFile}\n        metaFields={metaFields}\n        onClick={editAction}\n      />\n      {showLinkToFileUploadResult && file.uploadURL ? (\n        <CopyLinkButton\n          file={file}\n          uppy={uppy}\n          i18n={i18n}\n        />\n      ) : null}\n      {showRemoveButton ? (\n        <RemoveButton\n          i18n={i18n}\n          file={file}\n          uppy={uppy}\n          onClick={() => props.uppy.removeFile(file.id, 'removed-by-user')}\n        />\n      ) : null}\n    </div>\n  )\n}\n"],"mappings":"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"}