{"version":3,"names":["Translator","BasePlugin","constructor","uppy","opts","getPluginState","plugins","getState","id","setPluginState","update","setState","setOptions","newOpts","i18nInit","translator","defaultLocale","locale","i18n","translate","bind","i18nArray","translateArray","addTarget","Error","install","uninstall","render","afterUpdate"],"sources":["BasePlugin.js"],"sourcesContent":["/**\n * Core plugin logic that all plugins share.\n *\n * BasePlugin does not contain DOM rendering so it can be used for plugins\n * without a user interface.\n *\n * See `Plugin` for the extended version with Preact rendering for interfaces.\n */\n\nimport Translator from '@uppy/utils/lib/Translator'\n\nexport default class BasePlugin {\n  constructor (uppy, opts = {}) {\n    this.uppy = uppy\n    this.opts = opts\n  }\n\n  getPluginState () {\n    const { plugins } = this.uppy.getState()\n    return plugins[this.id] || {}\n  }\n\n  setPluginState (update) {\n    const { plugins } = this.uppy.getState()\n\n    this.uppy.setState({\n      plugins: {\n        ...plugins,\n        [this.id]: {\n          ...plugins[this.id],\n          ...update,\n        },\n      },\n    })\n  }\n\n  setOptions (newOpts) {\n    this.opts = { ...this.opts, ...newOpts }\n    this.setPluginState() // so that UI re-renders with new options\n    this.i18nInit()\n  }\n\n  i18nInit () {\n    const translator = new Translator([this.defaultLocale, this.uppy.locale, this.opts.locale])\n    this.i18n = translator.translate.bind(translator)\n    this.i18nArray = translator.translateArray.bind(translator)\n    this.setPluginState() // so that UI re-renders and we see the updated locale\n  }\n\n  /**\n   * Extendable methods\n   * ==================\n   * These methods are here to serve as an overview of the extendable methods as well as\n   * making them not conditional in use, such as `if (this.afterUpdate)`.\n   */\n\n  // eslint-disable-next-line class-methods-use-this\n  addTarget () {\n    throw new Error('Extend the addTarget method to add your plugin to another plugin\\'s target')\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  install () {}\n\n  // eslint-disable-next-line class-methods-use-this\n  uninstall () {}\n\n  /**\n   * Called when plugin is mounted, whether in DOM or into another plugin.\n   * Needed because sometimes plugins are mounted separately/after `install`,\n   * so this.el and this.parent might not be available in `install`.\n   * This is the case with @uppy/react plugins, for example.\n   */\n  render () {\n    throw new Error('Extend the render method to add your plugin to a DOM element')\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  update () {}\n\n  // Called after every state update, after everything's mounted. Debounced.\n  // eslint-disable-next-line class-methods-use-this\n  afterUpdate () {}\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,OAAOA,UAAP,MAAuB,4BAAvB;AAEA,eAAe,MAAMC,UAAN,CAAiB;EAC9BC,WAAW,CAAEC,IAAF,EAAQC,IAAR,EAAmB;IAAA,IAAXA,IAAW;MAAXA,IAAW,GAAJ,EAAI;IAAA;;IAC5B,KAAKD,IAAL,GAAYA,IAAZ;IACA,KAAKC,IAAL,GAAYA,IAAZ;EACD;;EAEDC,cAAc,GAAI;IAChB,MAAM;MAAEC;IAAF,IAAc,KAAKH,IAAL,CAAUI,QAAV,EAApB;IACA,OAAOD,OAAO,CAAC,KAAKE,EAAN,CAAP,IAAoB,EAA3B;EACD;;EAEDC,cAAc,CAAEC,MAAF,EAAU;IACtB,MAAM;MAAEJ;IAAF,IAAc,KAAKH,IAAL,CAAUI,QAAV,EAApB;IAEA,KAAKJ,IAAL,CAAUQ,QAAV,CAAmB;MACjBL,OAAO,EAAE,EACP,GAAGA,OADI;QAEP,CAAC,KAAKE,EAAN,GAAW,EACT,GAAGF,OAAO,CAAC,KAAKE,EAAN,CADD;UAET,GAAGE;QAFM;MAFJ;IADQ,CAAnB;EASD;;EAEDE,UAAU,CAAEC,OAAF,EAAW;IACnB,KAAKT,IAAL,GAAY,EAAE,GAAG,KAAKA,IAAV;MAAgB,GAAGS;IAAnB,CAAZ;IACA,KAAKJ,cAAL,GAFmB,CAEG;;IACtB,KAAKK,QAAL;EACD;;EAEDA,QAAQ,GAAI;IACV,MAAMC,UAAU,GAAG,IAAIf,UAAJ,CAAe,CAAC,KAAKgB,aAAN,EAAqB,KAAKb,IAAL,CAAUc,MAA/B,EAAuC,KAAKb,IAAL,CAAUa,MAAjD,CAAf,CAAnB;IACA,KAAKC,IAAL,GAAYH,UAAU,CAACI,SAAX,CAAqBC,IAArB,CAA0BL,UAA1B,CAAZ;IACA,KAAKM,SAAL,GAAiBN,UAAU,CAACO,cAAX,CAA0BF,IAA1B,CAA+BL,UAA/B,CAAjB;IACA,KAAKN,cAAL,GAJU,CAIY;EACvB;EAED;AACF;AACA;AACA;AACA;AACA;EAEE;;;EACAc,SAAS,GAAI;IACX,MAAM,IAAIC,KAAJ,CAAU,4EAAV,CAAN;EACD,CAhD6B,CAkD9B;;;EACAC,OAAO,GAAI,CAAE,CAnDiB,CAqD9B;;;EACAC,SAAS,GAAI,CAAE;EAEf;AACF;AACA;AACA;AACA;AACA;;;EACEC,MAAM,GAAI;IACR,MAAM,IAAIH,KAAJ,CAAU,8DAAV,CAAN;EACD,CAhE6B,CAkE9B;;;EACAd,MAAM,GAAI,CAAE,CAnEkB,CAqE9B;EACA;;;EACAkB,WAAW,GAAI,CAAE;;AAvEa"}