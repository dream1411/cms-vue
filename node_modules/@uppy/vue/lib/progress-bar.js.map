{"version":3,"names":["ProgressBarPlugin","shallowEqualObjects","Vue","isVue2","data","plugin","props","uppy","required","type","Object","mounted","installPlugin","methods","options","id","target","$refs","container","use","getPlugin","uninstallPlugin","removePlugin","beforeDestroy","watch","current","old","setOptions","render","args","createElement","ref","h"],"sources":["progress-bar.js"],"sourcesContent":["import ProgressBarPlugin from '@uppy/progress-bar'\nimport { shallowEqualObjects } from 'shallow-equal'\n\n// Cross compatibility dependencies\nimport * as Vue from 'vue'\nimport { isVue2 } from './utils.js'\n\nexport default {\n  data () {\n    return {\n      plugin: {},\n    }\n  },\n  props: {\n    uppy: {\n      required: true,\n    },\n    props: {\n      type: Object,\n    },\n  },\n  mounted () {\n    this.installPlugin()\n  },\n  methods: {\n    installPlugin () {\n      const { uppy } = this\n      const options = {\n        id: 'vue:ProgressBar',\n        ...this.props,\n        target: this.$refs.container,\n      }\n      uppy.use(ProgressBarPlugin, options)\n      this.plugin = uppy.getPlugin(options.id)\n    },\n    uninstallPlugin (uppy) {\n      uppy.removePlugin(this.plugin)\n    },\n  },\n  beforeDestroy () {\n    this.uninstallPlugin(this.uppy)\n  },\n  watch: {\n    uppy (current, old) {\n      if (old !== current) {\n        this.uninstallPlugin(old)\n        this.installPlugin()\n      }\n    },\n    props (current, old) {\n      if (!shallowEqualObjects(current, old)) {\n        this.plugin.setOptions({ ...current })\n      }\n    },\n  },\n  render (...args) {\n    // Hack to allow support for Vue 2 and 3\n    if (isVue2(...args)) {\n      // If it's first argument is a function, then it's a Vue 2 App\n      const [createElement] = args\n      return createElement('div', {\n        ref: 'container',\n      })\n    }\n\n    // Otherwise, we import the `h` function from the Vue package (in Vue 3 fashion)\n    return Vue.h('div', {\n      ref: 'container',\n    })\n  },\n}\n"],"mappings":"AAAA,OAAOA,iBAAP,MAA8B,oBAA9B;AACA,SAASC,mBAAT,QAAoC,eAApC,C,CAEA;;AACA,OAAO,KAAKC,GAAZ,MAAqB,KAArB;AACA,SAASC,MAAT,QAAuB,YAAvB;AAEA,eAAe;EACbC,IAAI,GAAI;IACN,OAAO;MACLC,MAAM,EAAE;IADH,CAAP;EAGD,CALY;;EAMbC,KAAK,EAAE;IACLC,IAAI,EAAE;MACJC,QAAQ,EAAE;IADN,CADD;IAILF,KAAK,EAAE;MACLG,IAAI,EAAEC;IADD;EAJF,CANM;;EAcbC,OAAO,GAAI;IACT,KAAKC,aAAL;EACD,CAhBY;;EAiBbC,OAAO,EAAE;IACPD,aAAa,GAAI;MACf,MAAM;QAAEL;MAAF,IAAW,IAAjB;MACA,MAAMO,OAAO,GAAG;QACdC,EAAE,EAAE,iBADU;QAEd,GAAG,KAAKT,KAFM;QAGdU,MAAM,EAAE,KAAKC,KAAL,CAAWC;MAHL,CAAhB;MAKAX,IAAI,CAACY,GAAL,CAASnB,iBAAT,EAA4Bc,OAA5B;MACA,KAAKT,MAAL,GAAcE,IAAI,CAACa,SAAL,CAAeN,OAAO,CAACC,EAAvB,CAAd;IACD,CAVM;;IAWPM,eAAe,CAAEd,IAAF,EAAQ;MACrBA,IAAI,CAACe,YAAL,CAAkB,KAAKjB,MAAvB;IACD;;EAbM,CAjBI;;EAgCbkB,aAAa,GAAI;IACf,KAAKF,eAAL,CAAqB,KAAKd,IAA1B;EACD,CAlCY;;EAmCbiB,KAAK,EAAE;IACLjB,IAAI,CAAEkB,OAAF,EAAWC,GAAX,EAAgB;MAClB,IAAIA,GAAG,KAAKD,OAAZ,EAAqB;QACnB,KAAKJ,eAAL,CAAqBK,GAArB;QACA,KAAKd,aAAL;MACD;IACF,CANI;;IAOLN,KAAK,CAAEmB,OAAF,EAAWC,GAAX,EAAgB;MACnB,IAAI,CAACzB,mBAAmB,CAACwB,OAAD,EAAUC,GAAV,CAAxB,EAAwC;QACtC,KAAKrB,MAAL,CAAYsB,UAAZ,CAAuB,EAAE,GAAGF;QAAL,CAAvB;MACD;IACF;;EAXI,CAnCM;;EAgDbG,MAAM,GAAW;IAAA,kCAANC,IAAM;MAANA,IAAM;IAAA;;IACf;IACA,IAAI1B,MAAM,CAAC,GAAG0B,IAAJ,CAAV,EAAqB;MACnB;MACA,MAAM,CAACC,aAAD,IAAkBD,IAAxB;MACA,OAAOC,aAAa,CAAC,KAAD,EAAQ;QAC1BC,GAAG,EAAE;MADqB,CAAR,CAApB;IAGD,CARc,CAUf;;;IACA,OAAO7B,GAAG,CAAC8B,CAAJ,CAAM,KAAN,EAAa;MAClBD,GAAG,EAAE;IADa,CAAb,CAAP;EAGD;;AA9DY,CAAf"}