{"version":3,"names":["DashboardPlugin","shallowEqualObjects","Vue","isVue2","data","plugin","props","uppy","required","type","Object","plugins","Array","open","Boolean","mounted","installPlugin","methods","options","id","target","$refs","container","use","getPlugin","openModal","uninstallPlugin","removePlugin","beforeDestroy","beforeUnmount","watch","current","old","closeModal","setOptions","render","args","createElement","ref","h"],"sources":["dashboard-modal.js"],"sourcesContent":["import DashboardPlugin from '@uppy/dashboard'\nimport { shallowEqualObjects } from 'shallow-equal'\n\nimport * as Vue from 'vue'\nimport { isVue2 } from './utils.js'\n\nexport default {\n  data () {\n    return {\n      plugin: {},\n    }\n  },\n  props: {\n    uppy: {\n      required: true,\n    },\n    props: {\n      type: Object,\n    },\n    plugins: {\n      type: Array,\n    },\n    open: {\n      type: Boolean,\n      required: true,\n    },\n  },\n  mounted () {\n    this.installPlugin()\n  },\n  methods: {\n    installPlugin () {\n      const { uppy } = this\n      const options = {\n        id: 'vue:DashboardModal',\n        plugins: this.plugins,\n        ...this.props,\n        target: this.$refs.container,\n      }\n      uppy.use(DashboardPlugin, options)\n      this.plugin = uppy.getPlugin(options.id)\n      if (this.open) {\n        this.plugin.openModal()\n      }\n    },\n    uninstallPlugin (uppy) {\n      uppy.removePlugin(this.plugin)\n    },\n  },\n  beforeDestroy () {\n    this.uninstallPlugin(this.uppy)\n  },\n  beforeUnmount () {\n    this.uninstallPlugin(this.uppy)\n  },\n  watch: {\n    uppy (current, old) {\n      if (old !== current) {\n        this.uninstallPlugin(old)\n        this.installPlugin()\n      }\n    },\n    open (current, old) {\n      if (current && !old) {\n        this.plugin.openModal()\n      }\n      if (!current && old) {\n        this.plugin.closeModal()\n      }\n    },\n    props (current, old) {\n      if (!shallowEqualObjects(current, old)) {\n        this.plugin.setOptions({ ...current })\n      }\n    },\n  },\n  render (...args) {\n    // Hack to allow support for Vue 2 and 3\n    if (isVue2(...args)) {\n      // If it's first argument is a function, then it's a Vue 2 App\n      const [createElement] = args\n      return createElement('div', {\n        ref: 'container',\n      })\n    }\n\n    // Otherwise, we use the `h` function from the Vue package (in Vue 3 fashion)\n    return Vue.h('div', {\n      ref: 'container',\n    })\n  },\n}\n"],"mappings":"AAAA,OAAOA,eAAP,MAA4B,iBAA5B;AACA,SAASC,mBAAT,QAAoC,eAApC;AAEA,OAAO,KAAKC,GAAZ,MAAqB,KAArB;AACA,SAASC,MAAT,QAAuB,YAAvB;AAEA,eAAe;EACbC,IAAI,GAAI;IACN,OAAO;MACLC,MAAM,EAAE;IADH,CAAP;EAGD,CALY;;EAMbC,KAAK,EAAE;IACLC,IAAI,EAAE;MACJC,QAAQ,EAAE;IADN,CADD;IAILF,KAAK,EAAE;MACLG,IAAI,EAAEC;IADD,CAJF;IAOLC,OAAO,EAAE;MACPF,IAAI,EAAEG;IADC,CAPJ;IAULC,IAAI,EAAE;MACJJ,IAAI,EAAEK,OADF;MAEJN,QAAQ,EAAE;IAFN;EAVD,CANM;;EAqBbO,OAAO,GAAI;IACT,KAAKC,aAAL;EACD,CAvBY;;EAwBbC,OAAO,EAAE;IACPD,aAAa,GAAI;MACf,MAAM;QAAET;MAAF,IAAW,IAAjB;MACA,MAAMW,OAAO,GAAG;QACdC,EAAE,EAAE,oBADU;QAEdR,OAAO,EAAE,KAAKA,OAFA;QAGd,GAAG,KAAKL,KAHM;QAIdc,MAAM,EAAE,KAAKC,KAAL,CAAWC;MAJL,CAAhB;MAMAf,IAAI,CAACgB,GAAL,CAASvB,eAAT,EAA0BkB,OAA1B;MACA,KAAKb,MAAL,GAAcE,IAAI,CAACiB,SAAL,CAAeN,OAAO,CAACC,EAAvB,CAAd;;MACA,IAAI,KAAKN,IAAT,EAAe;QACb,KAAKR,MAAL,CAAYoB,SAAZ;MACD;IACF,CAdM;;IAePC,eAAe,CAAEnB,IAAF,EAAQ;MACrBA,IAAI,CAACoB,YAAL,CAAkB,KAAKtB,MAAvB;IACD;;EAjBM,CAxBI;;EA2CbuB,aAAa,GAAI;IACf,KAAKF,eAAL,CAAqB,KAAKnB,IAA1B;EACD,CA7CY;;EA8CbsB,aAAa,GAAI;IACf,KAAKH,eAAL,CAAqB,KAAKnB,IAA1B;EACD,CAhDY;;EAiDbuB,KAAK,EAAE;IACLvB,IAAI,CAAEwB,OAAF,EAAWC,GAAX,EAAgB;MAClB,IAAIA,GAAG,KAAKD,OAAZ,EAAqB;QACnB,KAAKL,eAAL,CAAqBM,GAArB;QACA,KAAKhB,aAAL;MACD;IACF,CANI;;IAOLH,IAAI,CAAEkB,OAAF,EAAWC,GAAX,EAAgB;MAClB,IAAID,OAAO,IAAI,CAACC,GAAhB,EAAqB;QACnB,KAAK3B,MAAL,CAAYoB,SAAZ;MACD;;MACD,IAAI,CAACM,OAAD,IAAYC,GAAhB,EAAqB;QACnB,KAAK3B,MAAL,CAAY4B,UAAZ;MACD;IACF,CAdI;;IAeL3B,KAAK,CAAEyB,OAAF,EAAWC,GAAX,EAAgB;MACnB,IAAI,CAAC/B,mBAAmB,CAAC8B,OAAD,EAAUC,GAAV,CAAxB,EAAwC;QACtC,KAAK3B,MAAL,CAAY6B,UAAZ,CAAuB,EAAE,GAAGH;QAAL,CAAvB;MACD;IACF;;EAnBI,CAjDM;;EAsEbI,MAAM,GAAW;IAAA,kCAANC,IAAM;MAANA,IAAM;IAAA;;IACf;IACA,IAAIjC,MAAM,CAAC,GAAGiC,IAAJ,CAAV,EAAqB;MACnB;MACA,MAAM,CAACC,aAAD,IAAkBD,IAAxB;MACA,OAAOC,aAAa,CAAC,KAAD,EAAQ;QAC1BC,GAAG,EAAE;MADqB,CAAR,CAApB;IAGD,CARc,CAUf;;;IACA,OAAOpC,GAAG,CAACqC,CAAJ,CAAM,KAAN,EAAa;MAClBD,GAAG,EAAE;IADa,CAAb,CAAP;EAGD;;AApFY,CAAf"}